{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex\\\\react-componentes-e-projetos-diversos\\\\todo-xstate-nextjs\\\\components\\\\Todo.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef } from \"react\";\nimport { useMachine } from \"@xstate/react\";\nimport { todoMachine } from \"./todoMachine\";\nimport cn from \"classnames\";\nexport function Todo({\n  todo,\n  onChange,\n  onDelete,\n  onComplete\n}) {\n  const inputRef = useRef(null);\n  const [state, send] = useMachine(todoMachine.withConfig({\n    actions: {\n      focusInput() {\n        setTimeout(() => {\n          inputRef.current && inputRef.current.select();\n        }, 0);\n      },\n\n      notifyDeleted(ctx) {\n        onDelete(ctx.id);\n      },\n\n      notifyChanged(ctx) {\n        onChange({\n          id: ctx.id,\n          title: ctx.title,\n          completed: ctx.completed\n        });\n      }\n\n    }\n  }, todo // extended state\n  ));\n  useEffect(() => {\n    if (todo.completed !== completed) {\n      // \"Completed\" changed externally... ugh.\n      // React needs Actors.\n      send(\"TOGGLE_COMPLETE\");\n    }\n  }, [todo]);\n  const {\n    completed,\n    title\n  } = state.context;\n  return __jsx(\"li\", {\n    className: cn({\n      editing: state.matches(\"editing\"),\n      completed: completed\n    }),\n    \"data-todo-state\": completed ? \"completed\" : \"active\",\n    key: todo.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 3\n    }\n  }, __jsx(\"div\", {\n    className: \"view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }\n  }, __jsx(\"input\", {\n    className: \"toggle\",\n    type: \"checkbox\",\n    onChange: _ => {\n      send(\"TOGGLE_COMPLETE\");\n    },\n    value: completed,\n    checked: completed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }), __jsx(\"label\", {\n    onDoubleClick: e => {\n      send(\"EDIT\");\n    },\n    style: {\n      color: '#000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, title, \" - teste\"), \" \", __jsx(\"button\", {\n    className: \"destroy\",\n    onClick: () => send(\"DELETE\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  })), __jsx(\"input\", {\n    className: \"edit\",\n    value: title,\n    onBlur: _ => send(\"BLUR\"),\n    onChange: e => send({\n      type: \"CHANGE\",\n      value: e.target.value\n    }),\n    onKeyPress: e => {\n      if (e.key === \"Enter\") {\n        send(\"COMMIT\");\n      }\n    },\n    onKeyDown: e => {\n      if (e.key === \"Escape\") {\n        send(\"CANCEL\");\n      }\n    },\n    ref: inputRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/Alex/react-componentes-e-projetos-diversos/todo-xstate-nextjs/components/Todo.jsx"],"names":["React","useEffect","useRef","useMachine","todoMachine","cn","Todo","todo","onChange","onDelete","onComplete","inputRef","state","send","withConfig","actions","focusInput","setTimeout","current","select","notifyDeleted","ctx","id","notifyChanged","title","completed","context","editing","matches","_","e","color","type","value","target","key"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { useMachine } from \"@xstate/react\";\nimport { todoMachine } from \"./todoMachine\";\nimport cn from \"classnames\";\n\nexport function Todo({ todo, onChange, onDelete, onComplete }) {\n\tconst inputRef = useRef(null);\n\tconst [state, send] = useMachine(\n\t\ttodoMachine.withConfig(\n\t\t\t{\n\t\t\t\tactions: {\n\t\t\t\t\tfocusInput() {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tinputRef.current && inputRef.current.select();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t},\n\t\t\t\t\tnotifyDeleted(ctx) {\n\t\t\t\t\t\tonDelete(ctx.id);\n\t\t\t\t\t},\n\t\t\t\t\tnotifyChanged(ctx) {\n\t\t\t\t\t\tonChange({\n\t\t\t\t\t\t\tid: ctx.id,\n\t\t\t\t\t\t\ttitle: ctx.title,\n\t\t\t\t\t\t\tcompleted: ctx.completed\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\ttodo // extended state\n\t\t)\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (todo.completed !== completed) {\n\t\t\t\t// \"Completed\" changed externally... ugh.\n\t\t\t\t// React needs Actors.\n\t\t\t\tsend(\"TOGGLE_COMPLETE\");\n\t\t\t}\n\t\t},\n\t\t[todo]\n\t);\n\n\tconst { completed, title } = state.context;\n\n\treturn (\n\t\t<li\n\t\t\tclassName={cn({\n\t\t\t\tediting: state.matches(\"editing\"),\n\t\t\t\tcompleted: completed\n\t\t\t})}\n\t\t\tdata-todo-state={completed ? \"completed\" : \"active\"}\n\t\t\tkey={todo.id}\n\t\t>\n\t\t\t<div className=\"view\">\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"toggle\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tonChange={_ => {\n\t\t\t\t\t\tsend(\"TOGGLE_COMPLETE\");\n\t\t\t\t\t}}\n\t\t\t\t\tvalue={completed}\n\t\t\t\t\tchecked={completed}\n\t\t\t\t/>\n\t\t\t\t<label\n\t\t\t\t\tonDoubleClick={e => {\n\t\t\t\t\t\tsend(\"EDIT\");\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ color: '#000' }}\n\t\t\t\t>\n\t\t\t\t\t{title} - teste\n\t\t\t\t</label>{\" \"}\n\t\t\t\t<button className=\"destroy\" onClick={() => send(\"DELETE\")} />\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\tclassName=\"edit\"\n\t\t\t\tvalue={title}\n\t\t\t\tonBlur={_ => send(\"BLUR\")}\n\t\t\t\tonChange={e => send({ type: \"CHANGE\", value: e.target.value })}\n\t\t\t\tonKeyPress={e => {\n\t\t\t\t\tif (e.key === \"Enter\") {\n\t\t\t\t\t\tsend(\"COMMIT\");\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonKeyDown={e => {\n\t\t\t\t\tif (e.key === \"Escape\") {\n\t\t\t\t\t\tsend(\"CANCEL\");\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tref={inputRef}\n\t\t\t/>\n\t\t</li>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}